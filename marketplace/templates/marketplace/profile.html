{% extends "base2.html" %}

{% block content %}
<div class="col-md-4">
  
  <form hidden id="post_form" action="{% url 'update_profile' %}" method="post">
    {% csrf_token %}
    </br>
    <label for="first">First Name</label>
    <input class="form-control" type="text" id="first" name="first" value="{{user.first_name}}">
    </br>
    <label for="last">Last Name</label>
    <input class="form-control" type="text" id="last" name="last" value="{{user.last_name}}">
    </br>
    <label for="email">Email</label>
    <input class="form-control" type="text" id="email" name="email" value="{{user.email}}">
    </br>
    <!--<label for="cost">Birthday</label>
    <input class="form-control" type="text" id="cost" name="cost">
    </br>
    <label for="cost">Location</label>
    <input class="form-control" type="text" id="cost" name="cost">
    </br>
    <label for="barter">Gender</label>
    <select class="form-control" id="barter" name="barter">
    <option value="1">Male</option>
    </select>-->
    </br>
    <input class="btn btn-primary" id="submit_button"  type="submit" value="Submit"/>
    <input class="btn btn-default" id="cancel_button" type="reset" value="Cancel">
  </form>

  <div id="user_info">
    <h3 id="subject"> Profile </h3>
    </br>
    <p> {{ user.first_name }} </p>
    </br>
    <p> {{ user.last_name }} </p> 
    </br>
    <p> {{ user.email }} </p>
    </br>
    <p> {{ userstuff.umbcid }} </p>
    </br>
	{% for i in ratingcounter %}
    	<span class="glyphicon glyphicon-star"></span>
	{% endfor %}
	{% for i in missing %}
    	<span class="glyphicon glyphicon-star-empty"></span>
	{% endfor %}
      
    </br>
    </br>
    <button id="edit_button" class="btn btn-default btn-sm">Edit Profile</button>
    <a href="#"><button class="btn btn-danger btn-sm">Delete Account</button></a>
    </br>
    </br>
    <a href="#"><button class="btn btn-default btn-sm">View Purchased Items</button></a>
  </div>
</div>

<div class="col-md-8 well">
  {% if posts.count == 0 %}
    <p style="text-align: center;">Your posts will show up here</p>
  {% endif %}   
  {% for post in post_page %}
  <div class="panel panel-default">
      <div class="panel-heading">
          <span style="float:right;">
              <a href="{% url 'view_post' post.id %}"><button class="btn btn-primary btn-xs">View</button></a>
              <a href="{% url 'checkout' post.id %}"><button class="btn btn-primary btn-xs">Edit</button></a>
              <a href="{% url 'delete_post' post.id %}"><button class="btn btn-danger btn-xs">Delete</button></a>
          </span>

          <h3 class="panel-title">{{ post.subject }} - ${{ post.cost }}</h3>
      </div>
      <div class="panel-body">
        <div class="media">
          <div class="media-left">
            <a href="#">
              {% if post.image %}
              <img class="media-object" style="height: 75px; width: 75px;" src="{{ post.image.url }}">
              {% endif %}
            </a>
          </div>
          <div class="media-body">
            <p>{{ post.description }}</p>
          </div>
        </div>
      </div>
    </div>
  {% endfor %}
  {% if posts %}
    <div style="text-align: center;">
      <div class="pagination" style="margin: auto;">
        <span class="step-links">
          {% if post_page.number != 1 %}
            <a href="?page=1"><button class="btn btn-primary btn-xs">First</button></a>
          {% endif %}
          {% if post_page.has_previous %}
            <a href="?page={{ post_page.previous_page_number }}"><button class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span></button></a>
          {% endif %}
          <span class="current">
            page {{ post_page.number }} of {{ post_page.paginator.num_pages }}
          </span>
          {% if post_page.has_next %}
            <a href="?page={{ post_page.next_page_number }}"><button class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span></button></a>
          {% endif %}
          {% if post_page.number != post_page.paginator.num_pages %}
            <a href="?page={{ post_page.paginator.num_pages }}"><button class="btn btn-primary btn-xs">Last</button></a>
          {% endif %}
        </span>
      </div>
    </div>
  {% endif %}
  </div>
</div> 
	
	
{% endblock %}
{% block miscjs %}
<script type="text/javascript">
  $('#edit_button').click(function() {
    $('#post_form').toggle();
    $('#user_info').toggle();
  });
  $('#cancel_button').click(function() {
    $('#post_form').toggle();
    $('#user_info').toggle();
  });
</script>
{% endblock %}
